var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
import { IonicNativePlugin, cordova } from '@ionic-native/core';
import { Observable } from 'rxjs';
var WebSocketServerOriginal = /** @class */ (function (_super) {
    __extends(WebSocketServerOriginal, _super);
    function WebSocketServerOriginal() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    WebSocketServerOriginal.prototype.getInterfaces = function () { return cordova(this, "getInterfaces", {}, arguments); };
    WebSocketServerOriginal.prototype.start = function (port, options) { return cordova(this, "start", { "observable": true, "clearFunction": "stop" }, arguments); };
    WebSocketServerOriginal.prototype.onFunctionToObservable = function (fnName) {
        return new Observable(function (observer) {
            var id = window.cordova.plugins.wsserver[fnName](observer.next.bind(observer), observer.error.bind(observer));
            return function () { return window.cordova.plugins.wsserver.removeCallback(id); };
        });
    };
    /**
     * Watches for new messages
     * @return {Observable<WebSocketMessage>}
     */
    WebSocketServerOriginal.prototype.watchMessage = function () {
        return this.onFunctionToObservable('onMessage');
    };
    /**
     * Watches for new opened connections
     * @return {Observable<WebSocketConnection>}
     */
    WebSocketServerOriginal.prototype.watchOpen = function () {
        return this.onFunctionToObservable('onOpen');
    };
    /**
     * Watches for closed connections
     * @return {Observable<WebSocketClose>}
     */
    WebSocketServerOriginal.prototype.watchClose = function () {
        return this.onFunctionToObservable('onClose');
    };
    /**
     * Watches for any websocket failures
     * @return {Observable<WebSocketFailure>}
     */
    WebSocketServerOriginal.prototype.watchFailure = function () {
        return this.onFunctionToObservable('onFailure');
    };
    WebSocketServerOriginal.prototype.stop = function () { return cordova(this, "stop", {}, arguments); };
    WebSocketServerOriginal.prototype.send = function (conn, msg) { return cordova(this, "send", {}, arguments); };
    WebSocketServerOriginal.prototype.close = function (conn, code, reason) { return cordova(this, "close", {}, arguments); };
    WebSocketServerOriginal.pluginName = "WebSocketServer";
    WebSocketServerOriginal.plugin = "cordova-plugin-websocket-server";
    WebSocketServerOriginal.pluginRef = "cordova.plugins.wsserver";
    WebSocketServerOriginal.repo = "https://github.com/becvert/cordova-plugin-websocket-server";
    WebSocketServerOriginal.platforms = ["Android", "iOS"];
    return WebSocketServerOriginal;
}(IonicNativePlugin));
var WebSocketServer = new WebSocketServerOriginal();
export { WebSocketServer };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvQGlvbmljLW5hdGl2ZS9wbHVnaW5zL3dlYi1zb2NrZXQtc2VydmVyL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFDQSxPQUFPLDhCQUFzQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3hFLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxNQUFNLENBQUM7O0lBNEdHLG1DQUFpQjs7OztJQU9wRCx1Q0FBYTtJQWNiLCtCQUFLLGFBQUMsSUFBWSxFQUFFLE9BQXlCO0lBSXJDLGdEQUFzQixHQUE5QixVQUFrQyxNQUFjO1FBQzlDLE9BQU8sSUFBSSxVQUFVLENBQUksVUFBQSxRQUFRO1lBQy9CLElBQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FDaEQsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEVBQzVCLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUM5QixDQUFDO1lBRUYsT0FBTyxjQUFNLE9BQUEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsRUFBbEQsQ0FBa0QsQ0FBQztRQUNsRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFRDs7O09BR0c7SUFDSCxzQ0FBWSxHQUFaO1FBQ0UsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVEOzs7T0FHRztJQUNILG1DQUFTLEdBQVQ7UUFDRSxPQUFPLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsb0NBQVUsR0FBVjtRQUNFLE9BQU8sSUFBSSxDQUFDLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRDs7O09BR0c7SUFDSCxzQ0FBWSxHQUFaO1FBQ0UsT0FBTyxJQUFJLENBQUMsc0JBQXNCLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQU9ELDhCQUFJO0lBV0osOEJBQUksYUFBQyxJQUF5QixFQUFFLEdBQVc7SUFZM0MsK0JBQUssYUFBQyxJQUF5QixFQUFFLElBQVksRUFBRSxNQUFjOzs7Ozs7MEJBOU0vRDtFQThHcUMsaUJBQWlCO1NBQXpDLGVBQWUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBQbHVnaW4sIENvcmRvdmEsIElvbmljTmF0aXZlUGx1Z2luIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuZGVjbGFyZSBjb25zdCB3aW5kb3c6IGFueTtcblxuZXhwb3J0IGludGVyZmFjZSBXZWJTb2NrZXRJbnRlcmZhY2VzIHtcbiAgW2tleTogc3RyaW5nXTogV2ViU29ja2V0SW50ZXJmYWNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYlNvY2tldEludGVyZmFjZSB7XG4gIGlwdjRBZGRyZXNzZXM6IHN0cmluZ1tdO1xuICBpcHY2QWRkcmVzc2VzOiBzdHJpbmdbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJTb2NrZXRPcHRpb25zIHtcbiAgb3JpZ2lucz86IHN0cmluZ1tdO1xuICBwcm90b2NvbHM/OiBzdHJpbmdbXTtcbiAgdGNwTm9EZWxheT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0SWRlbnRpZmllciB7XG4gIHV1aWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJTb2NrZXRTZXJ2ZXJEZXRhaWxzIHtcbiAgYWRkcjogc3RyaW5nO1xuICBwb3J0OiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0RmFpbHVyZSBleHRlbmRzIFdlYlNvY2tldFNlcnZlckRldGFpbHMge1xuICByZWFzb246IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJTb2NrZXRNZXNzYWdlIHtcbiAgY29ubjogV2ViU29ja2V0Q29ubmVjdGlvbjtcbiAgbXNnOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2ViU29ja2V0Q2xvc2Uge1xuICBjb25uOiBXZWJTb2NrZXRDb25uZWN0aW9uO1xuICBjb2RlOiBudW1iZXI7XG4gIHJlYXNvbjogc3RyaW5nO1xuICB3YXNDbGVhbjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWJTb2NrZXRDb25uZWN0aW9uIGV4dGVuZHMgV2ViU29ja2V0SWRlbnRpZmllciB7XG4gIHJlbW90ZUF0dHI6IHN0cmluZztcbiAgc3RhdGU6ICdvcGVuJyB8ICdjbG9zZWQnO1xuICBodHRwRmllbGRzOiBIdHRwRmllbGRzO1xuICByZXNvdXJjZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEh0dHBGaWVsZHMge1xuICAnQWNjZXB0LUVuY29kaW5nJzogc3RyaW5nO1xuICAnQWNjZXB0LUxhbmd1YWdlJzogc3RyaW5nO1xuICAnQ2FjaGUtQ29udHJvbCc6IHN0cmluZztcbiAgQ29ubmVjdGlvbjogc3RyaW5nO1xuICBIb3N0OiBzdHJpbmc7XG4gIE9yaWdpbjogc3RyaW5nO1xuICBQcmFnbWE6IHN0cmluZztcbiAgJ1NlYy1XZWJTb2NrZXQtRXh0ZW5zaW9ucyc6IHN0cmluZztcbiAgJ1NlYy1XZWJTb2NrZXQtS2V5Jzogc3RyaW5nO1xuICAnU2VjLVdlYlNvY2tldC1WZXJzaW9uJzogc3RyaW5nO1xuICBVcGdyYWRlOiBzdHJpbmc7XG4gICdVc2VyLUFnZW50Jzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEBuYW1lIFdlYlNvY2tldCBTZXJ2ZXJcbiAqIEBkZXNjcmlwdGlvblxuICogVGhpcyBwbHVnaW4gYWxsb3dzIHlvdSB0byBydW4gYSBzaW5nbGUsIGxpZ2h0d2VpZ2h0LCBiYXJlYm9uZSBXZWJTb2NrZXQgU2VydmVyLlxuICpcbiAqIEB1c2FnZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgV2ViU29ja2V0U2VydmVyIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS93ZWItc29ja2V0LXNlcnZlcic7XG4gKlxuICogY29uc3RydWN0b3IocHJpdmF0ZSB3c3NlcnZlcjogV2ViU29ja2V0U2VydmVyKSB7IH1cbiAqXG4gKiAuLi5cbiAqXG4gKiAvLyBzdGFydCB3ZWJzb2NrZXQgc2VydmVyXG4gKiB0aGlzLndzc2VydmVyLnN0YXJ0KDg4ODgsIHt9KS5zdWJzY3JpYmUoe1xuICogICBuZXh0OiBzZXJ2ZXIgPT4gY29uc29sZS5sb2coYExpc3RlbmluZyBvbiAke3NlcnZlci5hZGRyfToke3NlcnZlci5wb3J0fWApLFxuICogICBlcnJvcjogZXJyb3IgPT4gY29uc29sZS5sb2coYFVuZXhwZWN0ZWQgZXJyb3JgLCBlcnJvcik7XG4gKiB9KTtcbiAqXG4gKiAvLyB3YXRjaCBmb3IgYW55IG1lc3NhZ2VzXG4gKiB0aGlzLndzc2VydmVyLndhdGNoTWVzc2FnZSgpLnN1YnNjcmliZShyZXN1bHQgPT4ge1xuICogICBjb25zb2xlLmxvZyhgUmVjZWl2ZWQgbWVzc2FnZSAke3Jlc3VsdC5tc2d9IGZyb20gJHtyZXN1bHQuY29ubi51dWlkfWApO1xuICogfSk7XG4gKlxuICogLy8gc2VuZCBtZXNzYWdlIHRvIGNvbm5lY3Rpb24gd2l0aCBzcGVjaWZpZWQgdXVpZFxuICogdGhpcy53c3NlcnZlci5zZW5kKHsgdXVpZDogJzhlN2M0ZjQ4LWRlNjgtNGI2Zi04ZmNhLTEwNjdhMzUzOTY4ZCcgfSwgJ0hlbGxvIFdvcmxkJyk7XG4gKlxuICogLy8gc3RvcCB3ZWJzb2NrZXQgc2VydmVyXG4gKiB0aGlzLndzc2VydmVyLnN0b3AoKS50aGVuKHNlcnZlciA9PiB7XG4gKiAgIGNvbnNvbGUubG9nKGBTdG9wIGxpc3RlbmluZyBvbiAke3NlcnZlci5hZGRyfToke3NlcnZlci5wb3J0fWApO1xuICogfSk7XG4gKlxuICogYGBgXG4gKi9cbkBQbHVnaW4oe1xuICBwbHVnaW5OYW1lOiAnV2ViU29ja2V0U2VydmVyJyxcbiAgcGx1Z2luOiAnY29yZG92YS1wbHVnaW4td2Vic29ja2V0LXNlcnZlcicsXG4gIHBsdWdpblJlZjogJ2NvcmRvdmEucGx1Z2lucy53c3NlcnZlcicsXG4gIHJlcG86ICdodHRwczovL2dpdGh1Yi5jb20vYmVjdmVydC9jb3Jkb3ZhLXBsdWdpbi13ZWJzb2NrZXQtc2VydmVyJyxcbiAgcGxhdGZvcm1zOiBbJ0FuZHJvaWQnLCAnaU9TJ11cbn0pXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgV2ViU29ja2V0U2VydmVyIGV4dGVuZHMgSW9uaWNOYXRpdmVQbHVnaW4ge1xuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhpcyBkZXZpY2UncyBpbnRlcmZhY2VzXG4gICAqIEByZXR1cm4ge1Byb21pc2U8V2ViU29ja2V0SW50ZXJmYWNlcz59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGdldEludGVyZmFjZXMoKTogUHJvbWlzZTxXZWJTb2NrZXRJbnRlcmZhY2VzPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHdlYnNvY2tldCBzZXJ2ZXJcbiAgICogQHBhcmFtIHBvcnQge251bWJlcn0gTG9jYWwgcG9ydCBvbiB3aGljaCB0aGUgc2VydmljZSBydW5zLiAoMCBtZWFucyBhbnkgZnJlZSBwb3J0KVxuICAgKiBAcGFyYW0gb3B0aW9ucyB7V2ViU29ja2V0T3B0aW9uc30gQWRkaXRpb25hbCBvcHRpb25zIGZvciB3ZWJzb2NrZXRcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxXZWJTb2NrZXRTZXJ2ZXJEZXRhaWxzPn0gUmV0dXJucyBPYnNlcnZhYmxlIHdoZXJlIGFsbCBnZW5lcmljIGVycm9yIGNhbiBiZSBjYXRjaGVkIChtb3N0bHkgSlNPTkV4Y2VwdGlvbnMpXG4gICAqL1xuICBAQ29yZG92YSh7XG4gICAgb2JzZXJ2YWJsZTogdHJ1ZSxcbiAgICBjbGVhckZ1bmN0aW9uOiAnc3RvcCdcbiAgfSlcbiAgc3RhcnQocG9ydDogbnVtYmVyLCBvcHRpb25zOiBXZWJTb2NrZXRPcHRpb25zKTogT2JzZXJ2YWJsZTxXZWJTb2NrZXRTZXJ2ZXJEZXRhaWxzPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcHJpdmF0ZSBvbkZ1bmN0aW9uVG9PYnNlcnZhYmxlPFQ+KGZuTmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPFQ+KG9ic2VydmVyID0+IHtcbiAgICAgIGNvbnN0IGlkID0gd2luZG93LmNvcmRvdmEucGx1Z2lucy53c3NlcnZlcltmbk5hbWVdKFxuICAgICAgICBvYnNlcnZlci5uZXh0LmJpbmQob2JzZXJ2ZXIpLFxuICAgICAgICBvYnNlcnZlci5lcnJvci5iaW5kKG9ic2VydmVyKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuICgpID0+IHdpbmRvdy5jb3Jkb3ZhLnBsdWdpbnMud3NzZXJ2ZXIucmVtb3ZlQ2FsbGJhY2soaWQpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhdGNoZXMgZm9yIG5ldyBtZXNzYWdlc1xuICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFdlYlNvY2tldE1lc3NhZ2U+fVxuICAgKi9cbiAgd2F0Y2hNZXNzYWdlKCk6IE9ic2VydmFibGU8V2ViU29ja2V0TWVzc2FnZT4ge1xuICAgIHJldHVybiB0aGlzLm9uRnVuY3Rpb25Ub09ic2VydmFibGUoJ29uTWVzc2FnZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdhdGNoZXMgZm9yIG5ldyBvcGVuZWQgY29ubmVjdGlvbnNcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxXZWJTb2NrZXRDb25uZWN0aW9uPn1cbiAgICovXG4gIHdhdGNoT3BlbigpOiBPYnNlcnZhYmxlPFdlYlNvY2tldENvbm5lY3Rpb24+IHtcbiAgICByZXR1cm4gdGhpcy5vbkZ1bmN0aW9uVG9PYnNlcnZhYmxlKCdvbk9wZW4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYXRjaGVzIGZvciBjbG9zZWQgY29ubmVjdGlvbnNcbiAgICogQHJldHVybiB7T2JzZXJ2YWJsZTxXZWJTb2NrZXRDbG9zZT59XG4gICAqL1xuICB3YXRjaENsb3NlKCk6IE9ic2VydmFibGU8V2ViU29ja2V0Q2xvc2U+IHtcbiAgICByZXR1cm4gdGhpcy5vbkZ1bmN0aW9uVG9PYnNlcnZhYmxlKCdvbkNsb3NlJyk7XG4gIH1cblxuICAvKipcbiAgICogV2F0Y2hlcyBmb3IgYW55IHdlYnNvY2tldCBmYWlsdXJlc1xuICAgKiBAcmV0dXJuIHtPYnNlcnZhYmxlPFdlYlNvY2tldEZhaWx1cmU+fVxuICAgKi9cbiAgd2F0Y2hGYWlsdXJlKCk6IE9ic2VydmFibGU8V2ViU29ja2V0RmFpbHVyZT4ge1xuICAgIHJldHVybiB0aGlzLm9uRnVuY3Rpb25Ub09ic2VydmFibGUoJ29uRmFpbHVyZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0b3Agd2Vic29ja2V0IHNlcnZlciBhbmQgY2xvc2VzIGFsbCBjb25uZWN0aW9uc1xuICAgKiBAcmV0dXJuIHtQcm9taXNlPFdlYlNvY2tldFNlcnZlckRldGFpbHM+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBzdG9wKCk6IFByb21pc2U8V2ViU29ja2V0U2VydmVyRGV0YWlscz4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIE1lc3NhZ2UgdG8gYSBjb25uZWN0ZWQgZGV2aWNlXG4gICAqIEBwYXJhbSBjb25uIHtXZWJTb2NrZXRJZGVudGlmaWVyfSBDb25uZWN0aW9uIHRvIHNlbmQgbWVzc2FnZSB0b1xuICAgKiBAcGFyYW0gbXNnIHtzdHJpbmd9IE1lc3NhZ2UgdG8gc2VuZFxuICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBzZW5kKGNvbm46IFdlYlNvY2tldElkZW50aWZpZXIsIG1zZzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIHNwZWNpZmljIGNvbm5lY3Rpb24gdXNpbmcgdXVpZFxuICAgKiBAcGFyYW0gY29ubiB7V2ViU29ja2V0SWRlbnRpZmllcn0gQ29ubmVjdGlvbiB0byBjbG9zZVxuICAgKiBAcGFyYW0gY29kZSB7bnVtYmVyfSBDbG9zZSBjb2RlLCBkZXRlcm1pbmVzIGlmIGl0IHdhcyBjbGVhblxuICAgKiBAcGFyYW0gcmVhc29uIHtzdHJpbmd9IFJlYXNvbiBmb3IgY2xvc2luZ1xuICAgKiBAcmV0dXJuIHtQcm9taXNlPHZvaWQ+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBjbG9zZShjb25uOiBXZWJTb2NrZXRJZGVudGlmaWVyLCBjb2RlOiBudW1iZXIsIHJlYXNvbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuO1xuICB9XG59XG4iXX0=