var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
import { Injectable } from '@angular/core';
import { IonicNativePlugin, cordova, getPromise } from '@ionic-native/core';
var NestedObject = /** @class */ (function () {
    function NestedObject(pluginObj) {
        this.pluginObj = pluginObj;
    }
    NestedObject.prototype.wrap = function (functionName, args) {
        var plugin = WonderPush.getPlugin();
        var userPreferences = plugin ? plugin.UserPreferences : null;
        if (!plugin || !userPreferences || !userPreferences[functionName]) {
            return getPromise(function (res, rej) {
                rej(new Error('Could not find plugin'));
            });
        }
        return getPromise(function (res, rej) {
            userPreferences[functionName].apply(userPreferences, args.concat([res]));
        });
    };
    return NestedObject;
}());
export { NestedObject };
var UserPreferencesMethods = /** @class */ (function (_super) {
    __extends(UserPreferencesMethods, _super);
    function UserPreferencesMethods() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Get the default channel id
     * @returns {Promise<string>}
     */
    UserPreferencesMethods.prototype.getDefaultChannelId = function () {
        return this.wrap('getDefaultChannelId', []);
    };
    /**
     * Set the default channel id
     * @param {string} id
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.setDefaultChannelId = function (id) {
        return this.wrap('setDefaultChannelId', [id]);
    };
    /**
     * Get a channel group
     * @param {string} groupId
     * @returns {Promise<WonderPushChannelGroup | null>}
     */
    UserPreferencesMethods.prototype.getChannelGroup = function (groupId) {
        return this.wrap('getChannelGroup', [groupId]);
    };
    /**
     * Get a channel
     * @param {string} channelId
     * @returns {Promise<WonderPushChannel | null>}
     */
    UserPreferencesMethods.prototype.getChannel = function (channelId) {
        return this.wrap('getChannel', [channelId]);
    };
    /**
     * Create, update and remove channel existing groups to match the given channel groups
     * @param {WonderPushChannelGroup[]} channelGroups
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.setChannelGroups = function (channelGroups) {
        return this.wrap('setChannelGroups', [channelGroups]);
    };
    /**
     * Create, update and remove channels to match the given channels
     * @param {WonderPushChannel[]} channels
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.setChannels = function (channels) {
        return this.wrap('setChannels', [channels]);
    };
    /**
     * Create or update a channel group
     * @param {WonderPushChannelGroup} channelGroup
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.putChannelGroup = function (channelGroup) {
        return this.wrap('putChannelGroup', [channelGroup]);
    };
    /**
     * Create or update a channel
     * @param {WonderPushChannel} channel
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.putChannel = function (channel) {
        return this.wrap('putChannel', [channel]);
    };
    /**
     * Remove a channel group
     * @param {string} groupId
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.removeChannelGroup = function (groupId) {
        return this.wrap('removeChannelGroup', [groupId]);
    };
    /**
     * Remove a channel
     * @param {string} channelId
     * @returns {Promise<any>}
     */
    UserPreferencesMethods.prototype.removeChannel = function (channelId) {
        return this.wrap('removeChannel', [channelId]);
    };
    return UserPreferencesMethods;
}(NestedObject));
export { UserPreferencesMethods };
var WonderPush = /** @class */ (function (_super) {
    __extends(WonderPush, _super);
    function WonderPush() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.UserPreferences = new UserPreferencesMethods(_this);
        return _this;
    }
    WonderPush.prototype.setUserId = function (userId) { return cordova(this, "setUserId", {}, arguments); };
    WonderPush.prototype.isReady = function () { return cordova(this, "isReady", {}, arguments); };
    WonderPush.prototype.setLogging = function (enabled) { return cordova(this, "setLogging", {}, arguments); };
    WonderPush.prototype.setDelegate = function (delegate) { return cordova(this, "setDelegate", {}, arguments); };
    WonderPush.prototype.getDelegate = function () { return cordova(this, "getDelegate", {}, arguments); };
    WonderPush.prototype.getUserId = function () { return cordova(this, "getUserId", {}, arguments); };
    WonderPush.prototype.getInstallationId = function () { return cordova(this, "getInstallationId", {}, arguments); };
    WonderPush.prototype.getDeviceId = function () { return cordova(this, "getDeviceId", {}, arguments); };
    WonderPush.prototype.getPushToken = function () { return cordova(this, "getPushToken", {}, arguments); };
    WonderPush.prototype.getAccessToken = function () { return cordova(this, "getAccessToken", {}, arguments); };
    WonderPush.prototype.trackEvent = function (type, attributes) { return cordova(this, "trackEvent", {}, arguments); };
    WonderPush.prototype.addTag = function (tag) { return cordova(this, "addTag", {}, arguments); };
    WonderPush.prototype.removeTag = function (tag) { return cordova(this, "removeTag", {}, arguments); };
    WonderPush.prototype.removeAllTags = function () { return cordova(this, "removeAllTags", {}, arguments); };
    WonderPush.prototype.getTags = function () { return cordova(this, "getTags", {}, arguments); };
    WonderPush.prototype.hasTag = function (tag) { return cordova(this, "hasTag", {}, arguments); };
    WonderPush.prototype.setProperty = function (field, value) { return cordova(this, "setProperty", {}, arguments); };
    WonderPush.prototype.unsetProperty = function (field) { return cordova(this, "unsetProperty", {}, arguments); };
    WonderPush.prototype.addProperty = function (field, value) { return cordova(this, "addProperty", {}, arguments); };
    WonderPush.prototype.removeProperty = function (field, value) { return cordova(this, "removeProperty", {}, arguments); };
    WonderPush.prototype.getPropertyValue = function (field) { return cordova(this, "getPropertyValue", {}, arguments); };
    WonderPush.prototype.getPropertyValues = function (field) { return cordova(this, "getPropertyValues", {}, arguments); };
    WonderPush.prototype.getProperties = function () { return cordova(this, "getProperties", {}, arguments); };
    WonderPush.prototype.putProperties = function (properties) { return cordova(this, "putProperties", {}, arguments); };
    WonderPush.prototype.subscribeToNotifications = function () { return cordova(this, "subscribeToNotifications", {}, arguments); };
    WonderPush.prototype.isSubscribedToNotifications = function () { return cordova(this, "isSubscribedToNotifications", {}, arguments); };
    WonderPush.prototype.unsubscribeFromNotifications = function () { return cordova(this, "unsubscribeFromNotifications", {}, arguments); };
    WonderPush.prototype.getUserConsent = function () { return cordova(this, "getUserConsent", {}, arguments); };
    WonderPush.prototype.setUserConsent = function (consent) { return cordova(this, "setUserConsent", {}, arguments); };
    WonderPush.prototype.clearAllData = function () { return cordova(this, "clearAllData", {}, arguments); };
    WonderPush.prototype.clearEventsHistory = function () { return cordova(this, "clearEventsHistory", {}, arguments); };
    WonderPush.prototype.clearPreferences = function () { return cordova(this, "clearPreferences", {}, arguments); };
    WonderPush.prototype.downloadAllData = function () { return cordova(this, "downloadAllData", {}, arguments); };
    WonderPush.pluginName = "WonderPush";
    WonderPush.plugin = "wonderpush-cordova-sdk";
    WonderPush.pluginRef = "WonderPush";
    WonderPush.repo = "https://github.com/wonderpush/wonderpush-cordova-sdk";
    WonderPush.install = "ionic cordova plugin add wonderpush-cordova-sdk --variable CLIENT_ID=YOUR_CLIENT_ID --variable CLIENT_SECRET=YOUR_CLIENT_SECRET ";
    WonderPush.installVariables = ["CLIENT_ID", "CLIENT_SECRET"];
    WonderPush.platforms = ["Android", "iOS"];
    WonderPush = __decorate([
        Injectable()
    ], WonderPush);
    return WonderPush;
}(IonicNativePlugin));
export { WonderPush };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvQGlvbmljLW5hdGl2ZS9wbHVnaW5zL3dvbmRlcnB1c2gvbmd4L2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sOEJBQXNDLFVBQVUsRUFBRSxNQUFNLG9CQUFvQixDQUFDOztJQWdDbEYsc0JBQVksU0FBYztRQUN4QixJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUM3QixDQUFDO0lBRUQsMkJBQUksR0FBSixVQUFRLFlBQW9CLEVBQUUsSUFBVztRQUN2QyxJQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDdEMsSUFBTSxlQUFlLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDL0QsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLGVBQWUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxZQUFZLENBQUMsRUFBRTtZQUNqRSxPQUFPLFVBQVUsQ0FBSSxVQUFDLEdBQUcsRUFBRSxHQUFHO2dCQUM1QixHQUFHLENBQUMsSUFBSSxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDO1lBQzFDLENBQUMsQ0FBQyxDQUFDO1NBQ0o7UUFDRCxPQUFPLFVBQVUsQ0FBSSxVQUFDLEdBQUcsRUFBRSxHQUFHO1lBQzVCLGVBQWUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFPLElBQUksU0FBRSxHQUFHLEdBQUUsQ0FBQztRQUN4RSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7dUJBaERIOzs7O0lBb0Q0QywwQ0FBWTs7OztJQUN0RDs7O09BR0c7SUFDSCxvREFBbUIsR0FBbkI7UUFDRSxPQUFPLElBQUksQ0FBQyxJ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b0NBQWU7Ozs7Ozs7O0lBOVhKLFVBQVU7UUFEdEIsVUFBVSxFQUFFO09BQ0EsVUFBVTtxQkF6TnZCO0VBeU5nQyxpQkFBaUI7U0FBcEMsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFBsdWdpbiwgQ29yZG92YSwgSW9uaWNOYXRpdmVQbHVnaW4sIGdldFByb21pc2UgfSBmcm9tICdAaW9uaWMtbmF0aXZlL2NvcmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdvbmRlclB1c2hEZWxlZ2F0ZSB7XG4gIHVybEZvckRlZXBMaW5rKHVybDogc3RyaW5nLCBjYWxsYmFjazogKHVybD86IHN0cmluZykgPT4gdm9pZCk6IHZvaWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV29uZGVyUHVzaENoYW5uZWwge1xuICBpZDogc3RyaW5nO1xuICBncm91cElkPzogc3RyaW5nO1xuICBuYW1lPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgYnlwYXNzRG5kPzogYm9vbGVhbjtcbiAgc2hvd0JhZGdlPzogYm9vbGVhbjtcbiAgaW1wb3J0YW5jZT86IG51bWJlcjtcbiAgbGlnaHRzPzogYm9vbGVhbjtcbiAgbGlnaHRDb2xvcj86IG51bWJlcjtcbiAgdmlicmF0ZT86IGJvb2xlYW47XG4gIHNvdW5kPzogYm9vbGVhbjtcbiAgc291bmRVcmk/OiBzdHJpbmc7XG4gIGxvY2tzY3JlZW5WaXNpYmlsaXR5PzogbnVtYmVyO1xuICB2aWJyYXRlSW5TaWxlbnRNb2RlPzogYm9vbGVhbjtcbiAgY29sb3I/OiBudW1iZXI7XG4gIGxvY2FsT25seT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgV29uZGVyUHVzaENoYW5uZWxHcm91cCB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU/OiBzdHJpbmc7XG59XG5cbmNsYXNzIE5lc3RlZE9iamVjdCB7XG4gIHBsdWdpbk9iajogYW55O1xuICBjb25zdHJ1Y3RvcihwbHVnaW5PYmo6IGFueSkge1xuICAgIHRoaXMucGx1Z2luT2JqID0gcGx1Z2luT2JqO1xuICB9XG5cbiAgd3JhcDxUPihmdW5jdGlvbk5hbWU6IHN0cmluZywgYXJnczogYW55W10pOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCBwbHVnaW4gPSBXb25kZXJQdXNoLmdldFBsdWdpbigpO1xuICAgIGNvbnN0IHVzZXJQcmVmZXJlbmNlcyA9IHBsdWdpbiA/IHBsdWdpbi5Vc2VyUHJlZmVyZW5jZXMgOiBudWxsO1xuICAgIGlmICghcGx1Z2luIHx8ICF1c2VyUHJlZmVyZW5jZXMgfHwgIXVzZXJQcmVmZXJlbmNlc1tmdW5jdGlvbk5hbWVdKSB7XG4gICAgICByZXR1cm4gZ2V0UHJvbWlzZTxUPigocmVzLCByZWopID0+IHtcbiAgICAgICAgcmVqKG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgcGx1Z2luJykpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBnZXRQcm9taXNlPFQ+KChyZXMsIHJlaikgPT4ge1xuICAgICAgdXNlclByZWZlcmVuY2VzW2Z1bmN0aW9uTmFtZV0uYXBwbHkodXNlclByZWZlcmVuY2VzLCBbIC4uLmFyZ3MsIHJlc10pO1xuICAgIH0pO1xuICB9XG5cbn1cblxuZXhwb3J0IGNsYXNzIFVzZXJQcmVmZXJlbmNlc01ldGhvZHMgZXh0ZW5kcyBOZXN0ZWRPYmplY3Qge1xuICAvKipcbiAgICogR2V0IHRoZSBkZWZhdWx0IGNoYW5uZWwgaWRcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIGdldERlZmF1bHRDaGFubmVsSWQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy53cmFwPHN0cmluZyB8IG51bGw+KCdnZXREZWZhdWx0Q2hhbm5lbElkJywgW10pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCBjaGFubmVsIGlkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgc2V0RGVmYXVsdENoYW5uZWxJZChpZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy53cmFwKCdzZXREZWZhdWx0Q2hhbm5lbElkJywgW2lkXSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY2hhbm5lbCBncm91cFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZ3JvdXBJZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxXb25kZXJQdXNoQ2hhbm5lbEdyb3VwIHwgbnVsbD59XG4gICAqL1xuICBnZXRDaGFubmVsR3JvdXAoZ3JvdXBJZDogc3RyaW5nKTogUHJvbWlzZTxXb25kZXJQdXNoQ2hhbm5lbEdyb3VwIHwgbnVsbD4ge1xuICAgIHJldHVybiB0aGlzLndyYXA8V29uZGVyUHVzaENoYW5uZWxHcm91cCB8IG51bGw+KCdnZXRDaGFubmVsR3JvdXAnLCBbZ3JvdXBJZF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGNoYW5uZWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYW5uZWxJZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxXb25kZXJQdXNoQ2hhbm5lbCB8IG51bGw+fVxuICAgKi9cbiAgZ2V0Q2hhbm5lbChjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8V29uZGVyUHVzaENoYW5uZWwgfCBudWxsPiB7XG4gICAgcmV0dXJuIHRoaXMud3JhcDxXb25kZXJQdXNoQ2hhbm5lbCB8IG51bGw+KCdnZXRDaGFubmVsJywgW2NoYW5uZWxJZF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSwgdXBkYXRlIGFuZCByZW1vdmUgY2hhbm5lbCBleGlzdGluZyBncm91cHMgdG8gbWF0Y2ggdGhlIGdpdmVuIGNoYW5uZWwgZ3JvdXBzXG4gICAqIEBwYXJhbSB7V29uZGVyUHVzaENoYW5uZWxHcm91cFtdfSBjaGFubmVsR3JvdXBzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBzZXRDaGFubmVsR3JvdXBzKGNoYW5uZWxHcm91cHM6IFdvbmRlclB1c2hDaGFubmVsR3JvdXBbXSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMud3JhcCgnc2V0Q2hhbm5lbEdyb3VwcycsIFtjaGFubmVsR3JvdXBzXSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlLCB1cGRhdGUgYW5kIHJlbW92ZSBjaGFubmVscyB0byBtYXRjaCB0aGUgZ2l2ZW4gY2hhbm5lbHNcbiAgICogQHBhcmFtIHtXb25kZXJQdXNoQ2hhbm5lbFtdfSBjaGFubmVsc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgc2V0Q2hhbm5lbHMoY2hhbm5lbHM6IFdvbmRlclB1c2hDaGFubmVsW10pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLndyYXAoJ3NldENoYW5uZWxzJywgW2NoYW5uZWxzXSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIG9yIHVwZGF0ZSBhIGNoYW5uZWwgZ3JvdXBcbiAgICogQHBhcmFtIHtXb25kZXJQdXNoQ2hhbm5lbEdyb3VwfSBjaGFubmVsR3JvdXBcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIHB1dENoYW5uZWxHcm91cChjaGFubmVsR3JvdXA6IFdvbmRlclB1c2hDaGFubmVsR3JvdXApOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLndyYXAoJ3B1dENoYW5uZWxHcm91cCcsIFtjaGFubmVsR3JvdXBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgb3IgdXBkYXRlIGEgY2hhbm5lbFxuICAgKiBAcGFyYW0ge1dvbmRlclB1c2hDaGFubmVsfSBjaGFubmVsXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBwdXRDaGFubmVsKGNoYW5uZWw6IFdvbmRlclB1c2hDaGFubmVsKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy53cmFwKCdwdXRDaGFubmVsJywgW2NoYW5uZWxdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBjaGFubmVsIGdyb3VwXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBncm91cElkXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICByZW1vdmVDaGFubmVsR3JvdXAoZ3JvdXBJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy53cmFwKCdyZW1vdmVDaGFubmVsR3JvdXAnLCBbZ3JvdXBJZF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhIGNoYW5uZWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNoYW5uZWxJZFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgcmVtb3ZlQ2hhbm5lbChjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMud3JhcCgncmVtb3ZlQ2hhbm5lbCcsIFtjaGFubmVsSWRdKTtcbiAgfVxufVxuXG4vKipcbiAqIEBuYW1lIFdvbmRlclB1c2hcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIFB1c2ggbm90aWZpY2F0aW9uIGRlbGl2ZXJ5IHdpdGggdGhlIFdvbmRlclB1c2ggc2VydmljZS5cbiAqXG4gKiBHZXQgc3RhcnRlZCBpbiBtaW51dGVzOiBbSW9uaWMgUXVpY2tzdGFydCBHdWlkZV0oaHR0cHM6Ly9kb2NzLndvbmRlcnB1c2guY29tL2RvY3MvaW9uaWMtcXVpY2tzdGFydCkuXG4gKlxuICogUmVxdWlyZXMgdGhlIENvcmRvdmEgcGx1Z2luIGB3b25kZXJwdXNoLWNvcmRvdmEtc2RrYC5cbiAqXG4gKiBbV29uZGVyUHVzaCBwdXNoIG5vdGlmaWNhdGlvbnNdKGh0dHBzOi8vd3d3LndvbmRlcnB1c2guY29tKSBhcmUgdGhlIG1vc3QgZWZmZWN0aXZlIHdheVxuICogdG8gcmV0YWluIHlvdXIgdXNlcnMgYW5kIGdyb3cgeW91ciBhdWRpZW5jZSB3aGlsZSByZW1haW5pbmcgZnVsbHkgR0RQUiBjb21wbGlhbnQuXG4gKlxuICogQHVzYWdlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBpbXBvcnQgeyBXb25kZXJQdXNoIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS93b25kZXJwdXNoJztcbiAqXG4gKlxuICogY29uc3RydWN0b3IocHJpdmF0ZSB3b25kZXJQdXNoOiBXb25kZXJQdXNoKSB7IH1cbiAqXG4gKiAuLi5cbiAqXG4gKiAvLyBTdWJzY3JpYmUgdXNlclxuICogdGhpcy53b25kZXJQdXNoLnN1YnNjcmliZVRvTm90aWZpY2F0aW9ucygpXG4gKiAgIC50aGVuKCgpID0+IGNvbnNvbGUubG9nKFwiVXNlciBzdWJzY3JpYmVkIHRvIG5vdGlmaWNhdGlvbnNcIikpXG4gKiAgIC5jYXRjaCgoZXJyb3I6IGFueSkgPT4gY29uc29sZS5lcnJvcihlcnJvcikpO1xuICpcbiAqXG4gKiAvLyBTZW5kIGFuIGV2ZW50IChhIHB1cmNoYXNlIGluIHRoaXMgZXhhbXBsZSlcbiAqIHRoaXMud29uZGVyUHVzaC5zZW5kRXZlbnQoJ3B1cmNoYXNlJywge1xuICogICBmbG9hdF9wcmljZTogMTIuOTksXG4gKiAgIHN0cmluZ19za3U6IFwiWDEyMzQ1NlwiXG4gKiB9KTtcbiAqXG4gKiAvLyBUYWcgdXNlcnMgKGFzIGN1c3RvbWVycylcbiAqIHRoaXMud29uZGVyUHVzaC5hZGRUYWcoJ2N1c3RvbWVyJyk7XG4gKlxuICogLy8gUGVyc29uYWxpemVcbiAqIC8vIDEuIFN0b3JlIHVzZXIgZGV0YWlscy5cbiAqIC8vIDIuIFVzZSB0aG9zZSBkZXRhaWxzIHRvIGNyZWF0ZSBzZWdtZW50cy5cbiAqIC8vIDMuIEluY2x1ZGUgdGhvc2UgZGV0YWlscyBpbiB5b3VyIG5vdGlmaWNhdGlvbnMuXG4gKiB0aGlzLndvbmRlclB1c2gucHV0UHJvcGVydGllcyh7XG4gKiAgIHN0cmluZ19uYW1lOiAnSm9obiBELicsXG4gKiAgIGludF9hZ2U6IDI0XG4gKiB9KTtcbiAqXG4gKiAvLyBHRFBSXG4gKiAvLyAxLiBzZXQgUkVRVUlSRVNfVVNFUl9DT05TRU5UPXRydWUgdG8gZW5hYmxlIEdEUFIgY29tcGxpYW5jZS5cbiAqIC8vIDIuIFdvbmRlclB1c2ggZG9lc24ndCBzdGFydCB1bnRpbCBzZXRVc2VyQ29uc2VudCh0cnVlKSBpcyBjYWxsZWQuXG4gKiBjb25zdCBvbkNsaWNrID0gKHVzZXJDb25zZW50OiBib29sZWFuKSA9PiB0aGlzLndvbmRlclB1c2guc2V0VXNlckNvbnNlbnQodXNlckNvbnNlbnQpO1xuICpcbiAqIC8vIExpc3RlbiB0byBub3RpZmljYXRpb24gY2xpY2tzXG4gKiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd3b25kZXJwdXNoLm5vdGlmaWNhdGlvbk9wZW4nLCBmdW5jdGlvbihldmVudCkge1xuICogICBjb25zb2xlLmxvZygnTm90aWZpY2F0aW9uIG9wZW5lZCcsIGV2ZW50Lm5vdGlmaWNhdGlvbik7XG4gKiAgIGlmIChldmVudC5ub3RpZmljYXRpb25UeXBlID09PSAnZGF0YScpIHtcbiAqICAgICBjb25zb2xlLmxvZygnU2lsZW50IG5vdGlmaWNhdGlvbicsIGV2ZW50Lm5vdGlmaWNhdGlvbik7XG4gKiAgIH1cbiAqIH0pO1xuICogYGBgXG4gKlxuICogQGludGVyZmFjZXNcbiAqIFdvbmRlclB1c2hDaGFubmVsXG4gKiBXb25kZXJQdXNoQ2hhbm5lbEdyb3VwXG4gKi9cbkBQbHVnaW4oe1xuICBwbHVnaW5OYW1lOiAnV29uZGVyUHVzaCcsXG4gIHBsdWdpbjogJ3dvbmRlcnB1c2gtY29yZG92YS1zZGsnLFxuICBwbHVnaW5SZWY6ICdXb25kZXJQdXNoJyxcbiAgcmVwbzogJ2h0dHBzOi8vZ2l0aHViLmNvbS93b25kZXJwdXNoL3dvbmRlcnB1c2gtY29yZG92YS1zZGsnLFxuICBpbnN0YWxsOiAnaW9uaWMgY29yZG92YSBwbHVnaW4gYWRkIHdvbmRlcnB1c2gtY29yZG92YS1zZGsgLS12YXJpYWJsZSBDTElFTlRfSUQ9WU9VUl9DTElFTlRfSUQgLS12YXJpYWJsZSBDTElFTlRfU0VDUkVUPVlPVVJfQ0xJRU5UX1NFQ1JFVCAnLFxuICBpbnN0YWxsVmFyaWFibGVzOiBbJ0NMSUVOVF9JRCcsICdDTElFTlRfU0VDUkVUJ10sXG4gIHBsYXRmb3JtczogWydBbmRyb2lkJywgJ2lPUyddLFxufSlcbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBXb25kZXJQdXNoIGV4dGVuZHMgSW9uaWNOYXRpdmVQbHVnaW4ge1xuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB1c2VyIGlkLCB1c2VkIHRvIGlkZW50aWZ5IGEgc2luZ2xlIGlkZW50aXR5IGFjcm9zcyBtdWx0aXBsZSBkZXZpY2VzLFxuICAgKiBhbmQgdG8gY29ycmVjdGx5IGlkZW50aWZ5IG11bHRpcGxlIHVzZXJzIG9uIGEgc2luZ2xlIGRldmljZS5cbiAgICpcbiAgICogSWYgbm90IGNhbGxlZCwgdGhlIGxhc3QgdXNlZCB1c2VyIGlkIGl0IGFzc3VtZWQuIERlZmF1bHRpbmcgdG8gYG51bGxgIGlmIG5vbmUgaXMga25vd24uXG4gICAqXG4gICAqIFVwb24gY2hhbmdpbmcgdXNlcklkLCB0aGUgYWNjZXNzIHRva2VuIGlzIHdpcGVkLCBzbyBhdm9pZCB1bm5lY2Vzc2FyeSBjYWxscywgbGlrZSBjYWxsaW5nIHdpdGggYG51bGxgXG4gICAqIGp1c3QgYmVmb3JlIGNhbGxpbmcgd2l0aCBhIHVzZXIgaWQuXG4gICAqXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gdXNlcklkIC0gVGhlIHVzZXIgaWQsIHVuaXF1ZSB0byB5b3VyIGFwcGxpY2F0aW9uLlxuICAgKiAgIFVzZSBgbnVsbGAgZm9yIGFub255bW91cyB1c2Vycy5cbiAgICpcbiAgICogICBZb3UgYXJlIHN0cm9uZ2x5IGVuY291cmFnZWQgdG8gdXNlIHlvdXIgb3duIHVuaXF1ZSBpbnRlcm5hbCBpZGVudGlmaWVyLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cblxuICBAQ29yZG92YSgpXG4gIHNldFVzZXJJZCh1c2VySWQ6IHN0cmluZyB8IG51bGwpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBTREsgaXMgcmVhZHkgdG8gb3BlcmF0ZS5cbiAgICpcbiAgICogVGhlIFNESyBpcyByZWFkeSB3aGVuIGl0IGlzIGluaXRpYWxpemVkIGFuZCBoYXMgZmV0Y2hlZCBhbiBhY2Nlc3MgdG9rZW4uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGlzUmVhZHkoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnRyb2xzIG5hdGl2ZSBTREsgbG9nZ2luZy5cbiAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIC0gV2hldGhlciB0byBlbmFibGUgbG9ncy5cbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc2V0TG9nZ2luZyhlbmFibGVkOiBib29sZWFuKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB1cCBhIGRlbGVnYXRlIGZvciB0aWdodGVyIGludGVncmF0aW9uLCBvciByZW1vdmVzIGl0LlxuICAgKiBAcGFyYW0gez9Xb25kZXJQdXNoRGVsZWdhdGV9IGRlbGVnYXRlIC0gVGhlIGRlbGVnYXRlIHRvIHNldCwgb3IgYG51bGxgIHRvIHJlbW92ZSBpdC5cbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc2V0RGVsZWdhdGUoZGVsZWdhdGU6IFdvbmRlclB1c2hEZWxlZ2F0ZSB8IG51bGwpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBjdXJyZW50IGRlbGVnYXRlLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxXb25kZXJQdXNoRGVsZWdhdGUgfCBudWxsPn0gQSBwcm9taXNlIHdpdGggdGhlIGRlbGVnYXRlIG9mIG51bGxcbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgZ2V0RGVsZWdhdGUoKTogUHJvbWlzZTxXb25kZXJQdXNoRGVsZWdhdGUgfCBudWxsPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHVzZXJJZCBjdXJyZW50bHkgaW4gdXNlLCBgbnVsbGAgYnkgZGVmYXVsdC5cbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nIHwgbnVsbD59IEEgcHJvbWlzZSB3aXRoIHRoZSB1c2VyIElEIG9yIG51bGxcbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgZ2V0VXNlcklkKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbCA+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaW5zdGFsbGF0aW9uSWQgaWRlbnRpZnlpbmcgeW91ciBhcHBsaWNhdGlvbiBvbiBhIGRldmljZSwgYm9uZCB0byBhIHNwZWNpZmljIHVzZXJJZC5cbiAgICogSWYgeW91IHdhbnQgdG8gc3RvcmUgdGhpcyBpbmZvcm1hdGlvbiBvbiB5b3VyIHNlcnZlcnMsIGtlZXAgdGhlIGNvcnJlc3BvbmRpbmcgdXNlcklkIHdpdGggaXQuXG4gICAqIFdpbGwgcmV0dXJuIGBudWxsYCB1bnRpbCB0aGUgU0RLIGlzIHByb3Blcmx5IGluaXRpYWxpemVkLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmcgfCBudWxsPn0gQSBwcm9taXNlIHdpdGggdGhlIGluc3RhbGxhdGlvbiBJRCBvciBudWxsXG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGdldEluc3RhbGxhdGlvbklkKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB1bmlxdWUgZGV2aWNlIGlkZW50aWZpZXJcbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nIHwgbnVsbD59IEEgcHJvbWlzZSB3aXRoIHRoZSBkZXZpY2UgSUQgb3IgbnVsbFxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXREZXZpY2VJZCgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcHVzaCB0b2tlbi5cbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nIHwgbnVsbD59IEEgcHJvbWlzZSB3aXRoIHRoZSBwdXNoIHRva2VuIG9yIGBudWxsYFxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXRQdXNoVG9rZW4oKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnRseSB1c2VkIGFjY2VzcyB0b2tlbi5cbiAgICogUmV0dXJucyBgbnVsbGAgdW50aWwgdGhlIFNESyBpcyBwcm9wZXJseSBpbml0aWFsaXplZC5cbiAgICogVGhpcyB0b2dldGhlciB3aXRoIHlvdXIgY2xpZW50IHNlY3JldCBnaXZlcyBlbnRpcmUgY29udHJvbCB0byB0aGUgY3VycmVudCBpbnN0YWxsYXRpb24gYW5kIGFzc29jaWF0ZWQgdXNlciwgeW91IHNob3VsZCBub3QgZGlzY2xvc2UgaXQgdW5uZWNlc3NhcmlseS5cbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nIHwgbnVsbD59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGdldEFjY2Vzc1Rva2VuKCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZW5kIGFuIGV2ZW50IHRvIGJlIHRyYWNrZWQgdG8gV29uZGVyUHVzaC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgLSBUaGUgZXZlbnQgdHlwZSwgb3IgbmFtZS4gRXZlbnQgdHlwZXMgc3RhcnRpbmcgd2l0aCBhbiBgQGAgY2hhcmFjdGVyIGFyZSByZXNlcnZlZC5cbiAgICogQHBhcmFtIHs/b2JqZWN0fSBbYXR0cmlidXRlc10gLSBBbiBvYmplY3QgY29udGFpbmluZyBjdXN0b20gcHJvcGVydGllcyB0byBiZSBhdHRhY2hlZCB0byB0aGUgZXZlbnQuXG4gICAqICAgVGhlIGtleXMgc2hvdWxkIGJlIHByZWZpeGVkIGFjY29yZGluZyB0byB0aGUgdHlwZSBvZiB0aGVpciB2YWx1ZXMuXG4gICAqICAgWW91IGNhbiBmaW5kIHRoZSBkZXRhaWxzIGluIHRoZSBbQ29uY2VwdHMgPiBDdXN0b20gZmllbGRzXShodHRwczovL3d3dy53b25kZXJwdXNoLmNvbS9kb2NzL2d1aWRlL2N1c3RvbS1maWVsZHMpIHNlY3Rpb24gb2YgdGhlIGRvY3VtZW50YXRpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHRyYWNrRXZlbnQodHlwZTogc3RyaW5nLCBhdHRyaWJ1dGVzOiB7IFtrZXk6IHN0cmluZ106IGFueSB9KTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBvbmUgb3IgbW9yZSB0YWdzIHRvIHRoZSBpbnN0YWxsYXRpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSB0YWcgLSBUaGUgdGFncyB0byBhZGQgdG8gdGhlIGluc3RhbGxhdGlvbi4gWW91IGNhbiB1c2UgZWl0aGVyIGEgc2luZ2xlIHN0cmluZyBhcmd1bWVudCBvciBhbiBhcnJheSBvZiBzdHJpbmdzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBhZGRUYWcodGFnOiBzdHJpbmcgfCBzdHJpbmdbXSk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgb25lIG9yIG1vcmUgdGFncyBmcm9tIHRoZSBpbnN0YWxsYXRpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSB0YWcgLSBUaGUgdGFncyB0byByZW1vdmUgZnJvbSB0aGUgaW5zdGFsbGF0aW9uLiBZb3UgY2FuIHVzZSBlaXRoZXIgYSBzaW5nbGUgc3RyaW5nIGFyZ3VtZW50IG9yIGFuIGFycmF5IG9mIHN0cmluZ3MuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHJlbW92ZVRhZyh0YWc6IHN0cmluZyB8IHN0cmluZ1tdKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgdGFncyBmcm9tIHRoZSBpbnN0YWxsYXRpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHJlbW92ZUFsbFRhZ3MoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgdGhlIHRhZ3Mgb2YgdGhlIGluc3RhbGxhdGlvbi5cbiAgICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nW10+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXRUYWdzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogVGVzdHMgd2hldGhlciB0aGUgaW5zdGFsbGF0aW9uIGhhcyB0aGUgZ2l2ZW4gdGFnIGF0dGFjaGVkIHRvIGl0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIC0gVGhlIHRhZyB0byB0ZXN0LlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgaGFzVGFnKHRhZzogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIHRvIGEgZ2l2ZW4gaW5zdGFsbGF0aW9uIHByb3BlcnR5LlxuICAgKlxuICAgKiBUaGUgcHJldmlvdXMgdmFsdWUgaXMgcmVwbGFjZWQgZW50aXJlbHkuXG4gICAqIFNldHRpbmcgYHVuZGVmaW5lZGAgb3IgYG51bGxgIGhhcyB0aGUgc2FtZSBlZmZlY3QgYXMge0BsaW5rIGNvcmRvdmEucGx1Z2lucy5Xb25kZXJQdXNoI3Vuc2V0UHJvcGVydHl9LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gc2V0XG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBzZXRQcm9wZXJ0eShmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgdmFsdWUgb2YgYSBnaXZlbiBpbnN0YWxsYXRpb24gcHJvcGVydHkuXG4gICAqXG4gICAqIFRoZSBwcmV2aW91cyB2YWx1ZSBpcyByZXBsYWNlZCB3aXRoIGBudWxsYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHVuc2V0UHJvcGVydHkoZmllbGQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIHZhbHVlIHRvIGEgZ2l2ZW4gaW5zdGFsbGF0aW9uIHByb3BlcnR5LlxuICAgKlxuICAgKiBUaGUgc3RvcmVkIHZhbHVlIGlzIG1hZGUgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgb25lLlxuICAgKiBJZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gYXJyYXksIGFsbCBpdHMgdmFsdWVzIGFyZSBhZGRlZC5cbiAgICogSWYgYSB2YWx1ZSBpcyBhbHJlYWR5IHByZXNlbnQgaW4gdGhlIHN0b3JlZCB2YWx1ZSwgaXQgd29uJ3QgYmUgYWRkZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gdmFsdWVcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGFkZFByb3BlcnR5KGZpZWxkOiBzdHJpbmcsIHZhbHVlOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgdmFsdWUgZnJvbSBhIGdpdmVuIGluc3RhbGxhdGlvbiBwcm9wZXJ0eS5cbiAgICpcbiAgICogVGhlIHN0b3JlZCB2YWx1ZSBpcyBtYWRlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IG9uZS5cbiAgICogSWYgdGhlIGdpdmVuIHZhbHVlIGlzIGFuIGFycmF5LCBhbGwgaXRzIHZhbHVlcyBhcmUgcmVtb3ZlZC5cbiAgICogSWYgYSB2YWx1ZSBpcyBwcmVzZW50IG11bHRpcGxlIHRpbWVzIGluIHRoZSBzdG9yZWQgdmFsdWUsIHRoZXkgd2lsbCBhbGwgYmUgcmVtb3ZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZpZWxkIC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAqIEBwYXJhbSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICByZW1vdmVQcm9wZXJ0eShmaWVsZDogc3RyaW5nLCB2YWx1ZTogYW55KTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgYSBnaXZlbiBpbnN0YWxsYXRpb24gcHJvcGVydHkuXG4gICAqXG4gICAqIElmIHRoZSBwcm9wZXJ0eSBzdG9yZXMgYW4gYXJyYXksIG9ubHkgdGhlIGZpcnN0IHZhbHVlIGlzIHJldHVybmVkLlxuICAgKiBUaGlzIHdheSB5b3UgZG9uJ3QgaGF2ZSB0byBkZWFsIHdpdGggcG90ZW50aWFsIGFycmF5cyBpZiB0aGF0IHByb3BlcnR5IGlzIG5vdCBzdXBwb3NlZCB0byBob2xkIG9uZS5cbiAgICogUmV0dXJucyBgbnVsbGAgaWYgdGhlIHByb3BlcnR5IGlzIGFic2VudCBvciBoYXMgYW4gZW1wdHkgYXJyYXkgdmFsdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmaWVsZCAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byByZWFkIHZhbHVlcyBmcm9tXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGdldFByb3BlcnR5VmFsdWUoZmllbGQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHZhbHVlcyBvZiBhIGdpdmVuIGluc3RhbGxhdGlvbiBwcm9wZXJ0eS5cbiAgICpcbiAgICogSWYgdGhlIHByb3BlcnR5IGRvZXMgbm90IHN0b3JlIGFuIGFycmF5LCBhbiBhcnJheSBpcyByZXR1cm5lZCBuZXZlcnRoZWxlc3MuXG4gICAqIFRoaXMgd2F5IHlvdSBkb24ndCBoYXZlIHRvIGRlYWwgd2l0aCBwb3RlbnRpYWwgc2NhbGFyIHZhbHVlcyBpZiB0aGF0IHByb3BlcnR5IGlzIHN1cHBvc2VkIHRvIGhvbGQgYW4gYXJyYXkuXG4gICAqIFJldHVybnMgYW4gZW1wdHkgYXJyYXkgaW5zdGVhZCBvZiBgbnVsbGAgaWYgdGhlIHByb3BlcnR5IGlzIGFic2VudC5cbiAgICogUmV0dXJucyBhbiBhcnJheSB3cmFwcGluZyBhbnkgc2NhbGFyIHZhbHVlIGhlbGQgYnkgdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZmllbGQgLSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmVhZCB2YWx1ZXMgZnJvbVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnlbXT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGdldFByb3BlcnR5VmFsdWVzKGZpZWxkOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhdGVzdCBrbm93biBjdXN0b20gcHJvcGVydGllcyBhdHRhY2hlZCB0byB0aGUgY3VycmVudCBpbnN0YWxsYXRpb24gb2JqZWN0IHN0b3JlZCBieSBXb25kZXJQdXNoLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx7W3A6IHN0cmluZ106IGFueX0+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBnZXRQcm9wZXJ0aWVzKCk6IFByb21pc2U8e1trZXk6IHN0cmluZ106IGFueX0+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgcHJvcGVydGllcyBhdHRhY2hlZCB0byB0aGUgY3VycmVudCBpbnN0YWxsYXRpb24gb2JqZWN0IHN0b3JlZCBieSBXb25kZXJQdXNoLlxuICAgKlxuICAgKiBJbiBvcmRlciB0byByZW1vdmUgYSB2YWx1ZSwgdXNlIGBudWxsYC5cbiAgICpcbiAgICogQHBhcmFtIHt7W3A6IHN0cmluZ106IGFueX19IHByb3BlcnRpZXMuIFRoZSBrZXlzIHNob3VsZCBiZSBwcmVmaXhlZCBhY2NvcmRpbmcgdG8gdGhlIHR5cGUgb2YgdGhlaXIgdmFsdWVzLiBZb3UgY2FuIGZpbmQgdGhlIGRldGFpbHMgaW4gdGhlIFtTZWdtZW50YXRpb24gPiBQcm9wZXJ0aWVzXShodHRwczovL2RvY3Mud29uZGVycHVzaC5jb20vZG9jcy9wcm9wZXJ0aWVzI3NlY3Rpb24tY3VzdG9tLXByb3BlcnRpZXMpIHNlY3Rpb24gb2YgdGhlIGRvY3VtZW50YXRpb24uXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHB1dFByb3BlcnRpZXMocHJvcGVydGllczoge1trZXk6IHN0cmluZ106IGFueX0pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJzY3JpYmVzIHRvIHB1c2ggbm90aWZpY2F0aW9uIGFuZCByZWdpc3RlcnMgdGhlIGRldmljZSB0b2tlbiB3aXRoIFdvbmRlUHVzaC5cbiAgICpcbiAgICogT24gaU9TLCB5b3UgKiptdXN0KiogY2FsbCB0aGUgZm9sbG93aW5nIG1ldGhvZCBhdCBsZWFzdCBvbmNlIHRvIG1ha2UgdGhlIG5vdGlmaWNhdGlvbiB2aXNpYmxlIHRvIHRoZSB1c2VyLlxuICAgKlxuICAgKiAtIFlvdSBjYW4gY2FsbCB0aGlzIG1ldGhvZCBtdWx0aXBsZSB0aW1lcy4gVGhlIHVzZXIgaXMgb25seSBwcm9tcHRlZCBmb3IgcGVybWlzc2lvbiBieSBpT1Mgb25jZS5cbiAgICogLSBUaGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgdGhpcyBtZXRob2QgaWYgdGhlIHBlcm1pc3Npb24gaGFzIGFscmVhZHkgYmVlbiBncmFudGVkLCBidXQgaXQgZG9lcyBub3QgaGFybSBlaXRoZXIuXG4gICAqIC0gSWYgdGhlIHBlcm1pc3Npb24gaGFzIGJlZW4gZGVuaWVkIGluIHRoZSBPUywgdGhlIHVzZXIgd2lsbCBzdGF5IHNvZnQgb3B0LW91dC5cbiAgICpcbiAgICogQmVjYXVzZSBpbiBpT1MgeW91IG9ubHkgaGF2ZSAqb25lKiBjaGFuY2UgZm9yIHByb21wdGluZyB0aGUgdXNlciwgeW91IHNob3VsZCBmaW5kIGEgZ29vZCB0aW1pbmcgZm9yIHRoYXQuXG4gICAqIEZvciBhIHN0YXJ0LCB5b3UgY2FuIHN5c3RlbWF0aWNhbGx5IGNhbGwgaXQgd2hlbiB0aGUgYXBwbGljYXRpb24gc3RhcnRzLCBzbyB0aGF0IHRoZSB1c2VyIHdpbGwgYmUgcHJvbXB0ZWQgZGlyZWN0bHkgYXQgdGhlIGZpcnN0IGxhdW5jaC5cbiAgICpcbiAgICogQHJldHVybiB7UHJvbWlzZTxhbnk+fSBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHVwb24gc3VjY2Vzc2Z1bCBzdWJzY3JpcHRpb25cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgc3Vic2NyaWJlVG9Ob3RpZmljYXRpb25zKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgbm90aWZpY2F0aW9ucyBhcmUgZW5hYmxlZC5cbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGlzU3Vic2NyaWJlZFRvTm90aWZpY2F0aW9ucygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogVW5zdWJzY3JpYmVzIGZyb20gcHVzaCBub3RpZmljYXRpb24uXG4gICAqIFRoaXMgbWV0aG9kIG1hcmtzIHRoZSB1c2VyIGFzIHNvZnQgb3B0LW91dC5cbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cbiAgICovXG4gIEBDb3Jkb3ZhKClcbiAgdW5zdWJzY3JpYmVGcm9tTm90aWZpY2F0aW9ucygpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB1c2VyIGNvbnNlbnQgc3RhdGUuXG4gICAqIFJldHVybnMgdW5kZWZpbmVkIGlmIG5vIGV4cGxpY2l0IGNvbnNlbnQgd2FzIHNldC5cbiAgICogQHJldHVybnMge1Byb21pc2U8Ym9vbGVhbj59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIGdldFVzZXJDb25zZW50KCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBvciB3aXRoZHJhd3MgdXNlciBjb25zZW50LlxuICAgKiBJZiB0aGUgYHJlcXVpcmVzVXNlckNvbnNlbnRgIGluaXRpYWxpemF0aW9uIG9wdGlvbiBpcyB0cnVlLFxuICAgKiB0aGUgd2hvbGUgU0RLIGlzIHBhdXNlZCBhbmQgbm8gZGF0YSBpcyBzZW50IHRvIFdvbmRlclB1c2gsIHVudGlsIGNvbnNlbnQgaXMgcHJvdmlkZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29uc2VudCAtXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XG4gICAqL1xuICBAQ29yZG92YSgpXG4gIHNldFVzZXJDb25zZW50KGNvbnNlbnQ6IGJvb2xlYW4pOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYW55IGxvY2FsIHN0b3JhZ2UgYW5kIGFzayB0aGUgV29uZGVyUHVzaCBzZXJ2ZXJzIHRvIGRlbGV0ZSBhbnkgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIGFsbCBsb2NhbCBpbnN0YWxsYXRpb25zIGFuZCByZWxhdGVkIHVzZXJzLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBjbGVhckFsbERhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogQXNrIHRoZSBXb25kZXJQdXNoIHNlcnZlcnMgdG8gZGVsZXRlIGFueSBldmVudCBhc3NvY2lhdGVkIHdpdGggdGhlIGFsbCBsb2NhbCBpbnN0YWxsYXRpb25zLlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBjbGVhckV2ZW50c0hpc3RvcnkoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvKipcbiAgICogQXNrIHRoZSBXb25kZXJQdXNoIHNlcnZlcnMgdG8gZGVsZXRlIGFueSBjdXN0b20gZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIGFsbCBsb2NhbCBpbnN0YWxsYXRpb25zIGFuZCByZWxhdGVkIHVzZXJzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBjbGVhclByZWZlcmVuY2VzKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYXRlcyB0aGUgZG93bmxvYWQgb2YgYWxsIHVzZXIgcmVtb3RlIGFuZCBsb2NhbCBkYXRhLlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxhbnk+fVxuICAgKi9cbiAgQENvcmRvdmEoKVxuICBkb3dubG9hZEFsbERhdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm47XG4gIH1cblxuICBVc2VyUHJlZmVyZW5jZXMgPSBuZXcgVXNlclByZWZlcmVuY2VzTWV0aG9kcyh0aGlzKTtcbn1cbiJdfQ==